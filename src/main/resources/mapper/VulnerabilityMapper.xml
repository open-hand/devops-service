<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="io.choerodon.devops.infra.mapper.VulnerabilityMapper">
    <insert id="insertIgnore">
        insert ignore into devops_vulnerability(vulnerability_id, severity,
        title, description, published_date, last_modified_date)
        values
        <foreach collection="vulnSet" item="vuln" separator="," index="i">
            (#{vuln.vulnerabilityId},
            #{vuln.severity},
            #{vuln.title},
            #{vuln.description},
            #{vuln.publishedDate},
            #{vuln.lastModifiedDate}
            )
        </foreach>

    </insert>

    <select id="listByVulnIds" resultType="io.choerodon.devops.infra.dto.VulnerabilityDTO">
        select *
        from devops_vulnerability
        where vulnerability_id in
        <foreach collection="vulnIds" item="vulnId" open="(" close=")" separator="," index="i">
            #{vulnId}
        </foreach>
    </select>
</mapper>

