# 更新日志
这个文件记录devops-service所有版本的重大变动。

## [0.12.0] - 2018-12-14
### 新增
- 新增应用的开发权限分配功能，支持为各个应用配置特定的开发操作人员
- 新增配置映射功能，支持在每个环境下添加配置映射
- 新增密文功能，支持在每个环境下添加密文，可用于存储小片敏感数据的k8s资源，例如密码，token，或者密钥
- 新增组织层证书的管理功能，在组织层创建的证书，可在组织下各个项目创建证书时使用
- 新增实例事件，支持查看各个实例job与pod的事件记录
- 新增实例下Deployment查看更多的详情，包括：端口、数据卷、健康检查、主机设置、环境变量、标签
- 新增测试应用的创建，此类型的应用仅可用于自动化测试
- 新增页面自动刷新的功能，可点击所有刷新按钮旁的角标进行设置
- 集群中自动新增CrtManager插件，用于使该集群下的环境能正常使用申请证书的功能
- 新增Dashboard与报表中的查看权限，此权限与应用权限和环境权限相关
- 新建实例时新增实例名称自定义的功能
- 环境卡片上新增显示该环境所连接的集群名称

### 改变
- 优化了标记名称的命名规则
- 优化了实例模块的显示方式，在实例栏中显示该实例下pod的状态与总数量
- 优化了YMAL编辑器的样式
- 优化了环境总览页面内应用部署成功后的页面逻辑。
- 优化了开发流水线与报表部分空界面的显示


### 修复
- 修复环境流水线内，切换环境按钮消失的问题
- 修复环境流水线内修改环境名称后页面逻辑的问题
- 修复实例升级失败，相关网络状态显示不正常的问题
- 修复Dashboard页面拖动卡片出现空白页的问题
- 修复持续集成列表，sonarqube阶段不可链接跳转的问题
- 修复代码提交报表中英文缺失导致的空白问题
- 修复应用部署时环境选择引起的问题
- 修复创建应用失败后，未隐藏编辑按钮与停用按钮的问题

### 移除
- 移除了实例详情界面的部署详情模块


## [0.11.0] - 2018-11-16
### 新增
- 新增集群管理模块，支持对Kubernetes集群的创建、编辑以及权限分配
- 新增环境的权限分配功能，支持为各个环境配置特定的操作人员
- 新增删除环境的功能，支持在环境停用区对环境进行删除操作
- 开发流水线部分新增开发控制台，集成了开发流水线内主要的功能，能够更便捷的进行开发操作
- 新增开发流水线代码仓库中查看代码质量的入口
- Dashboard页面新增快速查看分支情况、代码提交情况、应用构建情况与部署情况的模块，并提供了快速跳转至相应模块的入口
- 实例部分新增deployments层,且支持一个chart文件中存在多个deployments
- 新增实例重新部署的功能
- 新增报表中部署失败的错误信息
### 改变
- 重新整理优化开发流水线结构，统一以应用为中心进行操作
- 重新整理优化部署流水线结构，统一以环境为中心进行操作
- 创建环境时必须选择一个关联集群
- 优化了应用市场导出文件的命名，支持自定义命名。
- 优化统一了平台各个空界面
- 优化了删除操作提示框，明确指出了删除对象名称
- 完善了平台指导文案，加强初级用户的理解
- 优化了删除实例后，关联网络列表中的目标对象内容
- 优化了实例升级失败或新建失败后，列表中版本的显示问题
- 优化了环境总览界面顶部创建操作按钮的显示
- 优化了部署总览界面快速部署的图标显示
### 修复
- 修复编辑应用名称时，未分辨输入字母的大小写的问题
- 修复创建网络时，选择实例与选择应用的逻辑问题
- 修复了偶现替换实例失败的问题
- 修复了部署超时后无法操作的问题
- 修复了创建域名时未校验环境的问题
- 修复了创建应用失败后不能处理的问题
### 移除
- 移除了项目中部署管理员角色，并将其所有权限分配给项目所有者
- 移除了部署流水线实例管理中的部署实例与单应用视图
- 移除了停止实例后的升级实例与重新部署的选项

## [0.10.0] - 2018-09-16
### 新增
- 新增环境分组，支持按照环境分组查看流水线 
- 新增域名证书管理功能，支持域名证书的申请与上传
- 新增DevOps报表功能，支持查看代码提交、应用构建以及应用部署的情况
- 新增部署总览功能，以便查看所有应用在各个环境下的部署情况，并能在此页面完成应用最新版本的快速部署
- 支持使用shell命令操作pod以便于调试
- 支持创建标记时填写release notes，并支持查看编辑与修改
- 新增查看容器日志时的Stop Following、Go Top功能，并支持全屏查看容器日志
- 新增容器界面选择环境与应用的下拉框和应用版本界面选择应用的下拉框便于搜索与过滤
### 修改
- 优化了容器日志长链接的状态
- 统一了系统内状态显示的图标
- 网络、域名、实例、应用部署等相关状态优化
- 优化了总览界面的加载速度
- 优化了表格的分页、筛选、排序和刷新
### 修复
- 修复部署超时失败后无法操作的问题
- 修复部署部分替换实例未做修改判断的问题
- 修复0.9.0版本网络列表提示错误、时间组件显示错误的问题
- 修复网络编辑中实例状态报错的问题
- 修复创建应用时,删掉应用模板里面的commit的问题
- 修复创建同名项目时，gitlab组创建失败的问题
- 修复页面连接文档的icon不统一的问题
- 修复gitops解释逻辑，list存放重复旧文件对象关系导致删除重复数据报错的问题
- 修复网络创建中添加端口按钮消失的问题
### 删除
- 移除部署流水线实例管理中的多应用视图

## [0.9.0] - 2018-08-17
### 新增
- 采用GitOps方式重构部署流程
- 增加环境总览相关接口
### 改变
- 重写部署实例values，支持标准yml格式
- 网络多端口支持，label selector 支持，NodePort类型支持

## [0.8.0] - 2018-07-20
### 新增
- 增加代码仓库、分支、标记、合并请求，以实现更多灵活的分支管理模型。
- 与敏捷管理连通，实现敏捷问题管理及持续交付代码管理一致性。
- 分支管理集成push、merge request webhook。
- 在容器日志中增加job操作事件消息。
- 实例部署配置文件只保存相对于版本中的修改部分，并支持保存新增参数。 
- 支持ci pipeline的额外阶段-代码质量检查在界面显示。
- 应用管理增加sonarqube链接接口。
- 版本升级的时候通过请求API实现版本间的平滑升级。


### 改变
- 修改CI生成版本号的命名规则。
- 配置文件信息存储方式修改为只保存修改内容。

### 移除
- 应用管理中的分支管理。

## [0.7.0] - 2018-06-29
### 新增
- 应用导出，以便在其他平台使用该平台研发的应用。
- 应用导入，以便导入其他平台研发的应用并部署使用。
- 实例、网络、域名发现，以便平台进行自我管理和升级。
- 网络管理实例不可用验证。
- 网络端口合法性验证。
- 域名管理网络不可用验证。
- 域名管理Path地址重复性验证。
- 每个权限上增加默认角色。
- 停用环境时校验该环境下不能存在网络及域名设置。

### 改变
- 后台报错支持中英文翻译。
- 修改两个API命名使其符合命名规范及权限检查规范。
- 优化用户获取预定义应用模板获取方式，无需再手工创建。

### 修复
- 应用部署时Values替换错乱。
- 持续集成流水线时长不准确。
- 应用市场中应用详情README在部分情况下无法获取。


## [0.6.0] - 2018-06-10
### 新增
- 增加发布管理，包括应用发布及应用市场。
- 在网络/域名管理中增加网络/域名状态和操作类型及状态以便跟踪网络/域名的运行情况。
- 增加容器日志以便追踪容器运行情况。
- 在应用部署中增加review功能以便用户确认操作。
- 在环境流水线中增加升级提示。
- 在环境客户端上增加资源对象一致性机制。
- 在环境客户端上增加消息发送失败及超时确认机制。

### 改变
- 重构应用部署页面，移除实例查看功能，增加应用实例页面。
- 在网络管理中区分自身端口和目标端口。
- 修改三个预定义应用模板使其能顺利生成版本及部署成功。
- 基于更规范的命名规则修改一些API。
- 优化了首次用helm部署的实例扫回机制。

### 移除
- 快速部署。

### 修复
- 修复分支管理的版本判断逻辑错误及前台提示错误。
- 修复devops和agent重启后各对象状态不一致。
- 修复组织管理员不在gitlab template group中。
- 修复一些其他小bug。