# 更新日志

这个文件记录devops-service所有版本的重大变动。

## [2.2.0-beta] 2022-09-17

- 流水线模块优化

## [1.0.0] 2021-06-18

#### 新增

- 新增获取两个tag之间的提交绑定的所有issueIds
- 支持Redis、MySQL基础组件的容器部署和主机部署
- 支持分支关联多个敏捷问题

#### 优化

- 升级hzero依赖到1.6.4版本
- 可控制choerodon-cluster-agent启动时并发同步gitrepo的数量
- 部署记录添加错误信息字段
- 删除测试主机相关逻辑
- 移除部署模块中的流水线菜单及功能
- 优化菜单目录结构
- 优化流水线查询chart任务版本信息逻辑

#### 修复
- 修复批量校验主机状态接口错误
- 修复无环境情况下，创建环境分组不展示问题
- 修复复制停用的流水线的状态问题
- 修复全新执行流水线时，记录不同步问题
- 修复流水线人工卡点任务审核错误

## [0.25.0] 2021-04-09
#### 新增

- 平台层新增支持应用模板的维护与管理，支持平台中所有项目在创建应用服务时使用
- 组织层新增支持应用模板的维护与管理，支持组织下所有项目在创建应用服务时使用
- 导入应用服务，新增支持从应用市场导入含有源代码的服务
- 项目层-应用部署，新增支持部署发布了部署包或Jar包的市场应用
- 应用流水线-CI阶段中，新增支持镜像安全扫描任务
- 流水线构建结果支持本地下载
- 流水线构建日志支持本地下载
- DevOps报表中新增流水线触发次数图与流水线执行时长图
- PV管理中创建PV时新增支持添加Label的功能
- 制品库-Docker仓库中新增镜像安全扫描的功能，支持显示出扫描后的结果详情

#### 优化
- 部署人员变更实例时，默认不再调整其中Pod数量，仅可通过资源-运行详情界面中的Pod控制器调整其数量

#### 修复
- 修复了制品界面上传大jar包接口超时的问题
- 修复了制品库升级jdk版本后，启动不成功问题
- 修复了修改流水线中的mvn发布任务，进入后制品库显示为数字的问题
- 修复了部署配置未默认按照时间倒序来进行排序的问题

## [0.24.0] 2020-12-24
#### 新增
- 流水线-代码检查任务中新增Maven单测的功能
- 流水线CD阶段中新增外部卡点的任务，用于触发外部的工作流或其他系统
- 应用服务版本新增支持批量删除的功能
- 部署模块新增主机配置功能，支持项目人员在此维护管理部署类型的主机
- 手动部署模块新增主机部署的方式，支持将jar包与Docker镜像直接部署到已有的主机中
- 集群模块新增“新建集群”的操作，支持通过录入节点来新建集群
- 集群模块新增支持增减“平台集群”的节点，并支持移除节点中的master或etcd角色

#### 优化
- 优化了应用流水线树结构中的搜索，直接筛出含有字段的对象，并进行字体颜色加深
- 创建与修改流水线的界面新增通过拖拽来改变阶段与任务的顺序	
- 优化了流水线页面的刷新加载速度
- 针对同一集群下的service外部ip及端口，添加了不能重复的限制


#### 修复
- 修复了部署配置页面列表中各个字段排序报错的问题
- 修复了创建流水线，添加任务时，应用服务为空问题
- 修复了流水线中人工卡点任务，可以选择没有应用服务权限的成员作为审核人员的问题
- 修复了应用流水线-CD阶段-部署任务中，不支持修改配置信息的问题
- 修复了实例视图中，共享应用服务详情中信息的展示问题
- 修复了资源-网络修改后，显示部署超时的失败信息的问题
- 修复了自定义资源更新后，内容丢失的问题

## [0.23.6] 2020-10-10

#### 新增
- 平台首页新增工作台功能，支持查看用户在所有项目下的待办问题、待审核任务、项目最近更新文档、项目与个人快速链接以及最近访问的应用服务与环境
- 项目列表中新增星标收藏项目的功能，支持在首页工作台中快速进入星标项目
- 流水线新增CD属性的阶段，支持在其中添加CD类型的任务，如：部署、主机部署、人工卡点
- 流水线中新增支持“正则匹配”、“精确匹配”、“精确排除”的触发分支匹配方式
- 流水线中新增“上传jar包至制品库”的步骤，支持将同一任务中构建生成的jar包上传至指定的目标制品库
- 流水线中新增“Maven发布”的步骤，支持构建工件并上传至项目下指定的目标制品库
- 流水线-CI阶段-mvn构建步骤-setting配置部分，新增支持选择项目下已有的依赖库
- 流水线-CI阶段-代码检查类型的任务中新增SonarQube的默认配置
- 流水线中新增CI变量配置的功能，支持项目所有者在此配置全局CI变量或某条流水线的CI变量，以便之后开发人员在添加流水线CI任务时引用
- 流水线-构建类型任务-高级设置中，新增共享目录设置的功能，支持同一流水线中的构建任务在共享目录中上传或下载产生的工件或其他文件内容
- 流水线模块新增Runner配置的指引界面
- 项目成员新增支持更多的GitLab权限，包括：Guest、Reporter、Developer和Maintainer，且拥有不同GitLab权限的项目成员在应用服务、代码管理、CI流水线菜单下的操作权限不同，从而使项目成员角色能适应更多的项目开发与管理场景藏
- 项目所有者在应用服务模块中修改应用服务时，支持选择项目层已有的自定义Docker仓库
- PV管理中新增LocalPV类型的PV
- 平台层新增平台开发者的预定义角色，支持该角色查看操作平台层事务、任务以及API相关的菜单

#### 修复
- 修复了组织层-客户端添加角色，页面无反应的问题
- 修复了组织层-客户端分配角色时能选择已停用角色的问题
- 修复了组织层Logo修改后未生效的问题
- 修复了“用户管理-修改用户”与“个人信息-修改信息”中，14开头手机校验失败的问题
- 修复了CI流水线中，项目成员没有应用服务的权限，可以看到该服务对应的CI流水线的问题
- 修复了无法收到资源删除验证的通知的问题
- 修复了组织管理员同时拥有项目成员角色, 被删除组织管理员角色后, 项目层应用服务权限不正常的问题
- 修复了更新用户角色时去掉所有角色, GitLab未同步的问题
- 修复了流水线执行记录页面中部署任务的生成实例显示问题
- 修复了停用Pod之后，还能增减Pod数量的问题
- 修复了一次部署可能产生多条部署记录的问题
- 修复了实例的唯一性校验为全局唯一的问题，改为了集群下唯一 
- 修复了同名版本生成时更新了chart包但是没有更新数据库values内容的问题
- 修复了平台管理-消息日志”中，过滤表搜索报错的问题
- 修复了接收设置页面中过滤表搜索栏，搜索过滤无效果的问题
- 修复了企业微信类型的webhook在Webhook记录中显示偶现为JSON类型的问题
- 修复了webhook记录详情中的”消息内容“模块为空的问题
- 修复了asgard服务的事务刷新不进去的问题

#### 优化
- 优化完善了平台的安全性相关的模块，提高了平台的安全性
- 在集群中安装监控组件时，增加“是否安装https”的选项，且默认为否，用以解决集群未安装证书时，监控组件无法使用的问题
- 优化了chart包的values文件获取，目前使用广度优先搜索， 多个层级包含values文件时， 会取最高层
- 优化了个人中心-接收设置界面卡顿的问题
- 优化了Pod数量置为1后，不能再降为0的提示；此时，鼠标hover至灰色的减少Pod的角标后，显示出：若想降至0，请直接点击“停用实例”
- 优化了修改用户界面手机号为必填的问题
- 优化了项目列表中，各项目栏内项目名称的可点击范围太大从而引起误触的问题
- 优化了流水线中创建部署任务时自动填充实例名称的步骤
- 流水线docker构建步骤中新增设置是否进行证书校验，用于解决自签名证书校验不通过的问题
- 优化了部署配置的创建步骤，没有生成过版本的应用服务也能创建部署配置

#### 移除
- 移除了应用服务详情中“权限分配”Tab页面，点击权限管理按钮后，将跳转至代码库管理页面
- 移除了“组织层-管理中心-仓库”界面中Docker仓库配置的入口

## [0.22.3] 2020-08-01

#### 新增
- 组织层“管理中心”新增Webhook配置功能，支持创建钉钉、企业微信、Json类型的Webhook来发送组织层的消息通知
- 组织层“管理中心”与项目层“设置-通知”模块新增Webhook执行记录页面，支持查看与重试某条Webhook执行记录
- 组织层“管理中心”新增“角色管理”的功能，支持组织管理员在此创建组织层或项目层的自定义角色
- “平台层-消息服务”中新增组织层与项目层中各个事件对应的钉钉、企业微信、Json类型webhook的默认消息模板
- 新增“普通敏捷项目”项目类型，此类项目仅保留了敏捷测试相关的功能，支持项目团队专注使用敏捷协作功能
- 新增“运维项目”项目类型，此类项目仅保留了开发部署等DevOps相关的功能
- 开发模块新增“CI流水线”的功能，支持创建多个阶段，且每个阶段中可添加多个任务
- CI流水线界面中支持配置添加多种类型的任务，包括：构建、代码检查与自定义任务
- CI流水线中新增支持多种常用语言的构建模板：如Maven模板、Npm模板、Go模板
- CI流水线界面中支持查看各条CI流水线的执行记录详情
- “应用部署-资源-域名”模块，创建与修改域名时，新增支持填写“Annotation”
- C7N agent中helm组件由V2升级至V3
- 升级部署模块支持的k8s版本至V1.17

#### 修复
- 修复了未登录Grafana时，节点监控页面白屏的问题
- 修复了点击实例界面“运行详情-更多详情”偶现白屏的问题
- 修复了实例界面运行详情中修改pod数量后进行重新部署，pod能否增减判断错误的问题
- 修复了变更实例查询values接口参数的问题
- 修复了实例部署超时未发站内信的问题
- 修复agent不支持StatefulSet的问题
- 修复了修改域名时，端口下拉框中未显示出已有端口的问题
- 修复了RegistrySecret在Kubernetes中被删除后，而Choerodon未感知的问题
- 修复了集群重置后Pod数据未进行同步的问题
- 修复了Polaris扫描的超时机制在查询时不生效的问题
- 修复了创建集群的ChoerodonId可能为纯数字字符串的问题
- 对一个文件存在多个资源包含PV和PVC的情况做了处理
- 修复了集群管理页面，树结构中集群状态排序错乱的问题
- 修复了DevOps报表中代码提交图、构建次数图选择时间范围时，数据不准确的问题
- 修复了以运行结果为条件搜索部署记录时，未筛除批量部署的问题
- 修复了导入应用服务时，选择的微服务后端模板中使用命令启动错误的问题


#### 优化
- 平台概览界面中新增了显示平台中集群状态与数量的情况
- “应用部署-资源”模块，实例视图与资源视图的环境层级，在环境名称后加上了所属的集群
- “平台管理-邮件日志”中，支持重发“成功”或“失败”状态的邮件
- “平台管理-邮件日志” 中，支持自动清除半年前的发送记录
- “组织层-用户管理-添加组织用户”、“项目层-团队成员-添加团队成员”时，在搜索出的用户后面，加上了登录名
- “平台管理-接口”页面的“权限编码”与“地址”后面加上了快速复制的按钮

## [0.21.0] 2020-03-04

#### 新增
- 集群模块新增“组件管理”功能，支持管理监控组件（Prometheus、Grafana、AlertManager）的安装与卸载
- 集群模块新增“集群监控”功能，在已安装监控组件的前提下，支持查看集群下所有节点的资源使用情况
- 集群下每个节点的详情页，新增“节点监控”功能，在安装监控组件之后，支持查看各节点的资源使用详情以及该节点下所有Pods的资源使用情况
- 集群模块新增“健康检查”功能，集成Polaris组件，支持检测出集群与环境中可能影响稳定性、可靠性、可伸缩性和安全性的配置问题
- 实例视图-环境层新增环境“健康检查”的功能，支持检测出各个实例配置文件中可能影响稳定性、可靠性、可伸缩性和安全性的配置问题
- 资源视图-环境层新增“提交同步情况”的显示，支持在此查看对应环境的提交同步情况与GitOps错误日志
- 部署模块、实例视图以及资源视图新增“批量部署”的功能，支持同时将多个应用服务批量部署至同一环境的功能
- “实例-运行详情-更多详情”中，新增“YAML格式查看”的功能，支持以YAML格式查看实例配置文件的详情
- “个人中心”新增“重置Gitlab密码”的功能，支持在此一键重置GitLab密码

#### 修复
- 修复了实例更新失败后，不能增减Pod的问题
- 修复了持续集成pipeline中，latest分支每页都有的问题

#### 优化
- 优化了应用服务的创建过程的超时逻辑，避免了一直在处理中的情况，从而导致应用服务无法删除
- 优化了拉取共享应用服务镜像
- 优化了创建PV的过程，允许用户直接为其分配权限至特定项目，来避免错误绑定的情况
- 优化了“实例-运行详情”界面的显示问题，完善了缺失字段的显示
- PV列表中，“所属集群”栏中新增集群的状态的显示
- PVC列表中新增了“PV类型”的显示
- 流水线列表中新增了“部署环境”列，用于展示流水线中包含的部署任务对应的环境

#### 移除
- 移除了“资源视图-网络详情”界面中Pods的CPU与内存使用量的折线图
- 移除了“资源视图-环境层”中的内存与CPU用量排行的列表


## [0.20.0] 2019-12-09

#### 新增
- 集群模块新增“组件管理”功能，支持管理CertManager组件的安装与卸载
- 集群模块新增PV管理的功能，支持在集群中创建与管理NFS与HostPath类型的PV
- 手动部署界面新增资源配置模块，支持在部署时就为对应的实例创建好关联的网络和域名
- 资源模块实例层中Pod详情页新增删除Pod的功能，支持删除实例中的某个Pod
- 资源模块实例层中查看实例事件时新增全屏查看的功能
- 应用服务模块新增删除停用状态应用服务的功能，支持删除停用后的应用服务
- 代码管理模块选择应用服务的下拉框中新增“最近使用”的快捷方式
- “代码管理”模块复制仓库地址，新增支持复制仓库的SSH地址
- 资源模块“实例视图-环境层”中新增部署配置的Tab页，支持有环境权限的人员在此处创建与管理部署配置
- 流水线列表中新增查看该条流水线所有执行记录的快速入口
- 项目层-通知设置中，新增敏捷消息、DevOps消息、资源删除验证的Tab页，支持在此页面统一管理项目下各类消息通知事件的发送方式及通知对象

#### 修复
- 修复了密文在环境库中为明文存储的问题
- 修复了导入共享服务所属项目数据不一致的问题
- 修复了人工触发流水线中，第一个阶段为空时，执行失败的问题
- 修复了导入应用服务时服务编码、名称长度限制问题
- 修复了权限分配界面为特定成员分配权限时必选一个成员的问题

#### 优化
- 资源模块实例层中，优化了实例状态与其对应的Command状态的逻辑
- 项目层的Harbor库默认置为私有
- 优化了手动部署后的页面跳转
- 优化了分支列表中的排序问题
- 优化了环境配置中的状态及其对应的操作，支持删除停用与未连接状态的环境
- 优化了资源模块中配置映射与密文的状态显示
- 优化了应用服务名称的字符限制，将其放宽至40个字符
- 优化了“个人中心-接收设置”的结构与消息类型

## [0.19.0] 2019-10-26
#### 新增
- 新增“应用服务详情”界面，其中包含了某个应用服务的版本、权限分配情况以及该服务共享设置的详情
- 新增应用服务“共享设置”的功能，允许项目所有者将应用服务的特定版本或某个版本类型共享给组织下其他项目
- 新增以其他应用服务的代码库为模板，以此来创建一个应用服务
- 新增批量导入组织内共享的应用服务至该项目下的功能
- 新增“代码管理”界面，此界面整合了原开发流水线中的所有功能，保留与突出了常用功能
- 环境配置模块新增环境详情界面，其中包含了对应环境下的GitOps日志、部署配置以及权限分配情况
- “部署”页面新增部署记录的列表，其中包含了手动部署以及流水线部署产生的所有记录及其详情
- 新增“资源”界面，其中包括了实例视图与资源视图，支持从应用服务和资源的维度来查看某个环境下的资源详情
- “资源”模块新增“自定义资源”界面，支持对非c7n-release类型的YAML文件进行添加和管理


#### 修复
- 修复了实例Code唯一性校验的问题
- 修复了devops-service服务多实例情况下，界面部署找不到gitops文件的问题
- 修复了已停用用户在之前的应用服务与环境中权限移除问题
- 修复了过滤表中点击Title排序报错的问题
- 修复了环境对应的gitops库不存在时，删除环境报错的问题
- 修复了搜索不存在的应用版本时出现500状态码的问题
- 修复了应用服务关联私有harbor配置，部署时未创建授权secret的问题
- 修复了实例删除后建立同名实例时，网络关联的实例没有关联更新的问题
- 修复了域名从普通协议切换到加密协议无效的问题
#### 优化
- “应用服务”模块优化了创建应用服务的步骤，支持快速地创建一个应用服务
- 将组件设置中的“通知设置”整合至环境配置模块环境详情界面中的“资源安全设置”，支持为对应环境下的删除事件配置通知方式（邮件、站内信或短信）与通知对象
- 优化了“应用服务部署”页面，支持在一个页面快速完成实例的部署
- 优化了原实例界面的“升级实例”功能，改为“变更实例”，支持回滚或升级至实例对应应用服务的任一版本
- 优化了实例界面“重新部署”的功能逻辑
- 优化了CD流水线的记录总览界面，将其融入部署记录列表之中
- 将组织层DevOps设置中的“集群管理”移至项目层的“部署”模块
- 将组织层DevOps设置中的“证书管理”移至项目层的“部署”模块


#### 移除
- 移除了组织层的应用模板。若想选择模板创建应用服务，可在应用服务界面点击“导入应用服务”的按钮，并选择：从GitHub导入-系统预设模板
- 移除了项目设置内的组件设置页面，支持在组织层、项目层、应用服务层的仓库设置或高级设置中直接修改默认仓库
- 移除了项目设置内的通知设置，并将其移至环境配置模块
- 移除了项目层的应用市场模块
- 移除了手动部署中“替换实例”的功能，需在实例界面“变更实例”进行实例的回滚或升级

## [0.18.0] - 2019-06-18
#### 新增
- 部署流水线模块流水线部分新增站内信消息用于通知流水线相关人员去执行对应的操作
- 部署流水线模块流水线详情页面新增流水线的状态显示与对应的操作按钮
- 部署流水线模块流水线管理界面与总览界面新增“快速搜索”和“与我相关”的筛选框
- 部署流水线模块新增部署配置功能，支持在此创建部署配置用于应用部署或创建自动部署任务时选择
- 部署流水线模块实例部分新增实例关联的网络和域名的界面，支持在此创建和查看与此实例相关的网络和域名
- 部署流水线模块创建证书页面新增上传证书的模式选择，并新增了对证书文件的校验
- 部署流水线模块环境总览页面GitOps日志部分，新增重试GitOps的按钮

#### 修复
- 修复了ConfigMap传递值为空的问题
- 修复了开发控制台页面工作台中分支的查询问题
- 修复了Redis容器shell里面进入redis命令行，格式有误的问题
- 修复了流水线失败后点击重试引起的问题


#### 优化
- 优化了开发流水线模块代码质量页面SonarQube的查询
- 优化了开发流水线模块创建分支的操作
- 优化了部署流水线模块流水线部分的权限问题
- 优化了实例界面的查询速度
- 优化了从GitLab和Github导入应用时只导入master分支的问题，现在会默认将所有分支导入
- 优化了应用市场中应用已发布版本的查询速度


#### 移除
- 移除了流水线部分的部署配置，将其置于了部署流水线模块之中

[0.17.0] - 2019-05-20
新增
- 开发流水线模块新增代码质量页面，支持查看应用在SonarQube中的检测结果与具体详情
- DevOps报表中新增代码质量图，支持查看应用代码质量中Bug、安全漏洞、代码异味、重复度与单测覆盖率的变化详情
- 项目设置模块新增通知设置的功能，支持为各个环境下的删除事件配置通知方式（邮件、站内信或短信）与通知对象
- 在通知设置中创建通知成功后，删除环境下的实例等资源时，需要输入通知得到的验证码进行删除操作的二次确认
- 项目设置模块中组件设置页面新增设置项目Harbor仓库类型的入口
- 部署流水线模块中配置映射部分，新增以YMAL格式进行创建与编辑
- 部署流水线模块状态为执行中的流水线详情中新增手动终止的按钮，项目所有者可以在此手动终止任何执行中的流水线

修复
- 修复了在开发控制台中能选择到应用市场导入的应用的问题
- 修复了创建流水线时人员查询重复的问题
- 修复了流水线中用户选择器的筛选问题
- 修复了流水线详情中点击展开按钮查看详情时全部展开的问题
- 修复了应用导出时部分应用获取chart包失败的问题
- 修复了从应用市场导入的应用分配权限报错的问题
- 修复了gitops执行saga事务实例偶尔会卡住的问题
- 修复了创建应用的saga事务处理逻辑中，偶现更新应用失败的问题
- 修复了gitops中对象的annotation没保留的问题


优化
- 优化了流水线详情中未执行任务的详情展示
- 优化了流水线详情内部署任务中实例的跳转功能
- 优化了流水线详情界面的UI
- 优化了流水线中无环境权限的项目成员的权限问题

[0.16.0] - 2019-04-19
新增
- 部署流水线模块新增流水线的功能，支持在流水线中创建多个阶段，且每个阶段中可添加多个任务。包括自动部署任务与人工卡点任务
- 部署流水线模块新增流水线执行总览页面，支持查看流水线的执行情况、流程详情以及审批历史
- 部署流水线模块新增部署配置页面，支持在此创建部署配置用于流水线中添加自动部署任务时选择
- 平台中新增CLI工具，支持使用命令行的方式来执行平台中的页面操作

修复
- 修复了删除部署错误的网络时报错的问题
- 修复了yaml编辑器错误提示的显示问题
- 修复了自动部署同一版本部署替换至多实例时失败的问题
- 修复了自动部署任务中手动输入的版本类型无法触发任务的问题
- 修复了在敏捷管理中创建任务时查询tag失败的问题
- 修复了在组件设置中创建harbor仓库失败的问题
- 修复了loadbalance类型的网络外部ip没有返回的问题
- 修复了创建应用时编码中间有两个中划线会创建失败的问题
- 修复了部署应用时未作修改便提交导致的问题
- 修复了各服务配置configMap没有回扫成功的问题

移除
- 移除了0.15.0版本中的自动部署页面，并将其内置于流水线中添加任务部

[0.15.0] - 2019-03-19
###新增
- 部署流水线模块新增自动部署功能，支持预设应用部署所需元素来创建自动部署任务
- 项目设置模块新增组件设置功能，目前支持创建 Docker 仓库与 Helm 仓库以供项目中的应用选择
- 项目层创建应用与编辑应用页面新增高级设置功能，支持修改默认的Docker仓库与Helm仓库
###改变
- 优化了Values组件的diff效果，支持切换编辑器模式来对比查看代码行的 增、删、改
- 优化了应用与环境权限分配模块，被分配权限的项目成员在 gitlab 中的角色统一改为developer
- 优化了平台里执行创建操作时出现熔断后的报错提示
- 优化了组织层的集群列表的显示
- 优化了组织层集群的删除逻辑，仅能删除没有关联环境的集群
- 优化了实例中操作日志页面的显示
###修复
- 修复了导入应用时，选择某些模板进行导入后会缺少Dockerfile的问题
- 修复了分支界面内的没有权限时的报错信息不当的问题
- 修复了agent与devops-service已断开连接但集群仍然显示正常的问题
- 修复了网络编辑中IP选择器的问题
- 修复了操作实例时提示信息不当的问题
- 修复了部署流水线中切换顶部环境，并进行页面跳转后出现的问题
- 修复了构建报表部分pipeline里点击重试按钮错误跳转的问题
- 修复了组织层集群页面的分页问题
###移除
- 移除了删除失败应用的功能
- 移除了停用应用的限制：不能停用有关联实例的应用


[0.14.0] - 2019-02-15
###新增
- 集群模块新增节点列表，支持查看集群节点的详细信息
- 实例详情部分新增实例操作日志，支持查看各个实例的详细操作记录
- 开发控制台页面流水线模块里的持续集成卡片上新增构建报表的入口
- 部署总览页面新增部署报表的入口

###改变
- 优化了实例详情内增减Pod数量的逻辑，Pod数量不可减少至零
- 优化了开发控制台页面流水线部分的逻辑与自动刷新的问题
- 将LoadBalancer中添加NodePort的填写输入框变为非必填
- 修改无分支时的空界面提示文案
- 优化实例详情中ingress的address值的空值显示
- 优化了GitLab同步用户的逻辑，在同步前添加了查询操作

###修复
- 修复了过滤表内无法叉掉已选选项的问题
- 修复了网络模块外部IP更新失败的问题
- 修复了开发流水线模块应用选择框中，“最近”部分的缓存问题
- 修复了应用管理界面中过滤表筛选的逻辑问题
- 修复了平台更新用户邮箱后，GitLab同步邮箱失败的问题
- 修复了不同集群版本StatefulSet的版本不通，Agent Controller兼容不同集群版本时产生的问题
- 修复了开发控制台的请求问题
- 修复了pipeline中sonarqube的stage丢失的问题
- 修复了导出应用时出现的后缀名格式问题
- 修复了创建环境时由于名称校验引起的报错问题
- 修复了创建实例时，实例名称为空的问题
- 修复了开发控制台中流水线内job顺序显示异常的问题
- 修复了删除存在关联环境的集群时，会先弹出删除指令的问题

###移除
- 移除了平台中点击步骤条进行跳转的功能

##[0.13.0] - 2019-01-07
###新增
- 开发控制台界面新增流水线模块，其中包括：分支管理、持续集成与应用版本；支持以分支为中心在流水线中进行开发操作
- 网络模块中目标对象部分新增支持Endpoints类型的网络设置
- 网络模块中网络配置部分新增支持LoadBalancer的选项
- 实例详情模块新增StatefulSet、DaemonSet、PVC、Service以及Ingress的详情展示
- 实例详情内新增Pod的增减功能，支持在当前界面直接增减Pod的数量
- 应用管理模块新增导入应用的功能，支持从Github和GitLab库中导入已有应用，并按照所选应用模板为导入的应用添加相应的文件
- 预定义模板新增SpringBoot、Go应用模板
- 容器界面新增显示每个Pod中各个Container的名称与状态

###改变
- 创建网络时，网络配置部分选择NodePort时，节点端口改为了非必填
- 容器界面详细区分了Pod与容器（container）的概念，使界面更加直观明了
- 优化了实例详情界面，将实例事件与运行详情模块的顺序进行了调换
- 优化统一了实例事件界面Job与Pod状态的展现方式
- 优化了上传证书的过程，调换了Cert文件与Key文件的填写顺序


###修复
- 修复了实例界面部署实例时，选择应用模块后，无法看到正在部署的实例的问题
- 修复了创建环境时名称校验的问题
- 修复了编辑网络时，目标对象中实例的显示问题
- 修复了创建域名时，重新选择网络时，对应端口不变的问题
- 修复了通过实例界面点击查看容器详情进行跳转后某些对应应用未显示的问题
- 修复了自动化测试模块里，部署失败后日志丢失的问题
- 修复了创建实例时，实例名为空时未提示的问题
- 修复了实例事件由于操作人员为空导致npe异常的问题
- 修复了环境流水线修改环境分组报错的问题
- 修复处理了webhook时区的问题
- 修复了导出应用自定义名称中带点时引起的格式问题
- 修复了在创建或修改操作提交后，表单内容仍可编辑的问题

###移除
- 移除了环境总览界面实例详情里的Networking的显示



## [0.12.0] - 2018-12-14
### 新增
- 新增应用的开发权限分配功能，支持为各个应用配置特定的开发操作人员
- 新增配置映射功能，支持在每个环境下添加配置映射
- 新增密文功能，支持在每个环境下添加密文，可用于存储小片敏感数据的k8s资源，例如密码，token，或者密钥
- 新增组织层证书的管理功能，在组织层创建的证书，可在组织下各个项目创建证书时使用
- 新增实例事件，支持查看各个实例job与pod的事件记录
- 新增实例下Deployment查看更多的详情，包括：端口、数据卷、健康检查、主机设置、环境变量、标签
- 新增测试应用的创建，此类型的应用仅可用于自动化测试
- 新增页面自动刷新的功能，可点击所有刷新按钮旁的角标进行设置
- 集群中自动新增CrtManager插件，用于使该集群下的环境能正常使用申请证书的功能
- 新增Dashboard与报表中的查看权限，此权限与应用权限和环境权限相关
- 新建实例时新增实例名称自定义的功能
- 环境卡片上新增显示该环境所连接的集群名称

### 改变
- 优化了标记名称的命名规则
- 优化了实例模块的显示方式，在实例栏中显示该实例下pod的状态与总数量
- 优化了YMAL编辑器的样式
- 优化了环境总览页面内应用部署成功后的页面逻辑。
- 优化了开发流水线与报表部分空界面的显示


### 修复
- 修复环境流水线内，切换环境按钮消失的问题
- 修复环境流水线内修改环境名称后页面逻辑的问题
- 修复实例升级失败，相关网络状态显示不正常的问题
- 修复Dashboard页面拖动卡片出现空白页的问题
- 修复持续集成列表，sonarqube阶段不可链接跳转的问题
- 修复代码提交报表中英文缺失导致的空白问题
- 修复应用部署时环境选择引起的问题
- 修复创建应用失败后，未隐藏编辑按钮与停用按钮的问题

### 移除
- 移除了实例详情界面的部署详情模块


## [0.11.0] - 2018-11-16
### 新增
- 新增集群管理模块，支持对Kubernetes集群的创建、编辑以及权限分配
- 新增环境的权限分配功能，支持为各个环境配置特定的操作人员
- 新增删除环境的功能，支持在环境停用区对环境进行删除操作
- 开发流水线部分新增开发控制台，集成了开发流水线内主要的功能，能够更便捷的进行开发操作
- 新增开发流水线代码仓库中查看代码质量的入口
- Dashboard页面新增快速查看分支情况、代码提交情况、应用构建情况与部署情况的模块，并提供了快速跳转至相应模块的入口
- 实例部分新增deployments层,且支持一个chart文件中存在多个deployments
- 新增实例重新部署的功能
- 新增报表中部署失败的错误信息
### 改变
- 重新整理优化开发流水线结构，统一以应用为中心进行操作
- 重新整理优化部署流水线结构，统一以环境为中心进行操作
- 创建环境时必须选择一个关联集群
- 优化了应用市场导出文件的命名，支持自定义命名。
- 优化统一了平台各个空界面
- 优化了删除操作提示框，明确指出了删除对象名称
- 完善了平台指导文案，加强初级用户的理解
- 优化了删除实例后，关联网络列表中的目标对象内容
- 优化了实例升级失败或新建失败后，列表中版本的显示问题
- 优化了环境总览界面顶部创建操作按钮的显示
- 优化了部署总览界面快速部署的图标显示
### 修复
- 修复编辑应用名称时，未分辨输入字母的大小写的问题
- 修复创建网络时，选择实例与选择应用的逻辑问题
- 修复了偶现替换实例失败的问题
- 修复了部署超时后无法操作的问题
- 修复了创建域名时未校验环境的问题
- 修复了创建应用失败后不能处理的问题
### 移除
- 移除了项目中部署管理员角色，并将其所有权限分配给项目所有者
- 移除了部署流水线实例管理中的部署实例与单应用视图
- 移除了停止实例后的升级实例与重新部署的选项

## [0.10.0] - 2018-09-16
### 新增
- 新增环境分组，支持按照环境分组查看流水线 
- 新增域名证书管理功能，支持域名证书的申请与上传
- 新增DevOps报表功能，支持查看代码提交、应用构建以及应用部署的情况
- 新增部署总览功能，以便查看所有应用在各个环境下的部署情况，并能在此页面完成应用最新版本的快速部署
- 支持使用shell命令操作pod以便于调试
- 支持创建标记时填写release notes，并支持查看编辑与修改
- 新增查看容器日志时的Stop Following、Go Top功能，并支持全屏查看容器日志
- 新增容器界面选择环境与应用的下拉框和应用版本界面选择应用的下拉框便于搜索与过滤
### 修改
- 优化了容器日志长链接的状态
- 统一了系统内状态显示的图标
- 网络、域名、实例、应用部署等相关状态优化
- 优化了总览界面的加载速度
- 优化了表格的分页、筛选、排序和刷新
### 修复
- 修复部署超时失败后无法操作的问题
- 修复部署部分替换实例未做修改判断的问题
- 修复0.9.0版本网络列表提示错误、时间组件显示错误的问题
- 修复网络编辑中实例状态报错的问题
- 修复创建应用时,删掉应用模板里面的commit的问题
- 修复创建同名项目时，gitlab组创建失败的问题
- 修复页面连接文档的icon不统一的问题
- 修复gitops解释逻辑，list存放重复旧文件对象关系导致删除重复数据报错的问题
- 修复网络创建中添加端口按钮消失的问题
### 删除
- 移除部署流水线实例管理中的多应用视图

## [0.9.0] - 2018-08-17
### 新增
- 采用GitOps方式重构部署流程
- 增加环境总览相关接口
### 改变
- 重写部署实例values，支持标准yml格式
- 网络多端口支持，label selector 支持，NodePort类型支持

## [0.8.0] - 2018-07-20
### 新增
- 增加代码仓库、分支、标记、合并请求，以实现更多灵活的分支管理模型。
- 与敏捷管理连通，实现敏捷问题管理及持续交付代码管理一致性。
- 分支管理集成push、merge request webhook。
- 在容器日志中增加job操作事件消息。
- 实例部署配置文件只保存相对于版本中的修改部分，并支持保存新增参数。 
- 支持ci pipeline的额外阶段-代码质量检查在界面显示。
- 应用管理增加sonarqube链接接口。
- 版本升级的时候通过请求API实现版本间的平滑升级。


### 改变
- 修改CI生成版本号的命名规则。
- 配置文件信息存储方式修改为只保存修改内容。

### 移除
- 应用管理中的分支管理。

## [0.7.0] - 2018-06-29
### 新增
- 应用导出，以便在其他平台使用该平台研发的应用。
- 应用导入，以便导入其他平台研发的应用并部署使用。
- 实例、网络、域名发现，以便平台进行自我管理和升级。
- 网络管理实例不可用验证。
- 网络端口合法性验证。
- 域名管理网络不可用验证。
- 域名管理Path地址重复性验证。
- 每个权限上增加默认角色。
- 停用环境时校验该环境下不能存在网络及域名设置。

### 改变
- 后台报错支持中英文翻译。
- 修改两个API命名使其符合命名规范及权限检查规范。
- 优化用户获取预定义应用模板获取方式，无需再手工创建。

### 修复
- 应用部署时Values替换错乱。
- 持续集成流水线时长不准确。
- 应用市场中应用详情README在部分情况下无法获取。


## [0.6.0] - 2018-06-10
### 新增
- 增加发布管理，包括应用发布及应用市场。
- 在网络/域名管理中增加网络/域名状态和操作类型及状态以便跟踪网络/域名的运行情况。
- 增加容器日志以便追踪容器运行情况。
- 在应用部署中增加review功能以便用户确认操作。
- 在环境流水线中增加升级提示。
- 在环境客户端上增加资源对象一致性机制。
- 在环境客户端上增加消息发送失败及超时确认机制。

### 改变
- 重构应用部署页面，移除实例查看功能，增加应用实例页面。
- 在网络管理中区分自身端口和目标端口。
- 修改三个预定义应用模板使其能顺利生成版本及部署成功。
- 基于更规范的命名规则修改一些API。
- 优化了首次用helm部署的实例扫回机制。

### 移除
- 快速部署。

### 修复
- 修复分支管理的版本判断逻辑错误及前台提示错误。
- 修复devops和agent重启后各对象状态不一致。
- 修复组织管理员不在gitlab template group中。
- 修复一些其他小bug。